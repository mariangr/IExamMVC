var IExamVideo=IExamVideo||{};IExamVideo.VideoList=null;$(document).ready(function(){IExamVideo.VideoList=new IExamVideo.VideoListModel;ko.applyBindings(IExamVideo.VideoList,document.getElementById(videosContainer));IExamVideo.PageLogic.loadVideosList()});IExamVideo.VideoListModel=function(){var n=this;n.videos=ko.observableArray([]).extend({notify:"always"});n.videoListIsVisible=ko.observable(!1)};IExamVideo.VideoElementVM=function(n,t,i){var r=this;r.id=ko.observable(n);r.name=ko.observable(t);r.link=ko.observable(i)};IExamVideo.PageLogic=function(){var t=function(){return $.ajax({type:"GET",url:"/Video/GetVideoElements/",success:function(n){var i,t,r;if(n.length>0){i=[];for(t in n)r=new IExamVideo.VideoElementVM(n[t].VideoID,n[t].name,n[t].link),i.push(r);IExamVideo.VideoList.videos.removeAll();ko.utils.arrayPushAll(IExamVideo.VideoList.videos(),i);IExamVideo.VideoList.videos.valueHasMutated();IExamVideo.VideoList.videoListIsVisible(!0)}else IExamVideo.VideoList.videoListIsVisible(!1)},error:function(n){alert(n.statusText)}}),!1},i=function(t){var i;if(i=t!=null?$(t.target).attr("id"):null,i!=null)return $.ajax({type:"GET",url:"/Video/GetVideoPlayer/",data:{id:i},success:function(t){$("#videosPlayerContainer").html(t);n();$("textarea").width($("#videoComents").width());$("#videosPlayerContainer").show();$("iframe").width($("#videosPlayerContainer").width());$("iframe").height($("iframe").width()*3/4);$("#videoComents").width($("iframe").width())},error:function(n){alert(n.statusText)}}),!1;$("#videosPlayerContainer").html("")},u=function(n){var r=$(n.target).attr("id");return $.ajax({type:"POST",url:"/Video/DeleteVideo/",data:{id:r},success:function(){i(null);$("#videoComents").html("");t();$("#videosPlayerContainer").hide()},error:function(n){alert(n.statusText)}}),!1},n=function(){var n=$("#selectedVideoInPlayerID").val(),t=$("#selectedVideoInPlayerLink").val();return $.ajax({type:"GET",url:"/Video/GetVideoComments/",data:{id:n,link:t},success:function(n){$("#videoComents").html(n)},error:function(n){alert(n.statusText)}}),!1},f=function(t){return $.ajax({type:"GET",url:"/Video/DeleteVideoComment/",data:{id:t},success:function(){n()},error:function(n){alert(n.statusText)}}),!1},r=function(){var t=$("#selectedVideoInPlayerLink").val(),i=$("#commentForVideo").val(),r=$("#currentUser").val(),u=$("#selectedVideoInPlayerID").val();return $.ajax({type:"GET",url:"/Video/CreateVideoComment/",data:{link:t,message:i,user:r,VideoID:u},success:function(t){t=="CommentAddedSuccessfully"?n():t=="EmptyComment"?$("#commentForVideo").attr("placeholder","Please write a comment..."):t=="UnspecifiedException"&&alert("Server Error")},error:function(n){alert(n.statusText)}}),!1},e=function(n){if(n.which==13)r();else return},o=function(){$(".countdown").html("1000"-$("#commentForVideo").val().length+" remaining symbols")};return{loadVideosList:t,LoadVideo:i,DeleteVideo:u,deleteComment:f,sendComment:r,textAreaEnterEvent:e,countDown:o}}();
/*
//# sourceMappingURL=iExamVideoPageScript.min.js.map
*/